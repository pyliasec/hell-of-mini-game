/*
 * ============================================================================
 * 파일명: gambling_prevention.c
 * 설명: 도박 중독 예방 및 교육 시스템 구현
 * 작성자: pyliasec
 * 작성일: 2025-07-17
 * 
 * 주요 기능:
 * - 도박 중독 예방을 위한 교육적 메시지
 * - 손실 감지 및 경고 시스템
 * - 건전한 게임 이용 가이드
 * ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include "gambling_prevention.h"

/*
 * ============================================================================
 * 프로젝트 목적 및 교육적 의도 설명
 * ============================================================================
 */
void showProjectPurpose(void) {
    printf("\n");
    printf("╔══════════════════════════════════════════════════════════╗\n");
    printf("║                    프로젝트 목적                         ║\n");
    printf("╠══════════════════════════════════════════════════════════╣\n");
    printf("║                                                          ║\n");
    printf("║  이 프로젝트는 도박 중독 예방을 위한 교육적 목적으로     ║\n");
    printf("║  개발되었습니다.                                         ║\n");
    printf("║                                                          ║\n");
    printf("║  주요 목적:                                              ║\n");
    printf("║  • 도박의 위험성과 중독성 체험                           ║\n");
    printf("║  • 확률과 통계의 현실적 이해                             ║\n");
    printf("║  • 손실에 대한 심리적 반응 학습                          ║\n");
    printf("║  • 건전한 여가 생활의 중요성 인식                        ║\n");
    printf("║                                                          ║\n");
    printf("║  주의: 실제 도박은 중독성이 강하며 심각한 경제적,        ║\n");
    printf("║        사회적 문제를 야기할 수 있습니다.                 ║\n");
    printf("║                                                          ║\n");
    printf("╚══════════════════════════════════════════════════════════╝\n");
    printf("\n계속하려면 엔터를 누르세요...");
    getchar();
}

/*
 * ============================================================================
 * 도박 예방 메시지 표시
 * ============================================================================
 */
void showGamblingPreventionMessage(void) {
    printf("\n");
    printf("════════════════ 도박 중독 예방 경고 ════════════════\n");
    printf("\n");
    printf("중요한 메시지:\n");
    printf("   이 게임은 도박의 위험성을 교육하기 위한 시뮬레이션입니다.\n");
    printf("\n");
    printf("실제 도박의 위험성:\n");
    printf("   • 중독성: 뇌의 보상 시스템을 변화시켜 조절 능력 상실\n");
    printf("   • 경제적 파탄: 가정 경제 파괴, 부채 누적\n");
    printf("   • 사회적 고립: 가족, 친구와의 관계 파괴\n");
    printf("   • 정신적 스트레스: 우울증, 불안장애 유발\n");
    printf("\n");
    printf("기억하세요:\n");
    printf("   도박은 '오락'이 아닌 '중독성 질병'입니다!\n");
    printf("   잃을 수 있는 돈으로만 게임하고, 감정적 판단을 피하세요.\n");
    printf("\n");
    printf("═══════════════════════════════════════════════════════════\n");
    printf("\n");
}

/*
 * ============================================================================
 * 큰 손실 감지 및 경고
 * ============================================================================
 */
void checkMajorLoss(int previousCoins, int currentCoins, const char* nickname) {
    int loss = previousCoins - currentCoins;
    
    if (loss >= MAJOR_LOSS_THRESHOLD) {
        printf("\n");
        printf("═══════════ 큰 손실 감지! ═══════════\n");
        printf("\n");
        printf("%s님, 방금 %d 코인을 잃으셨습니다!\n", nickname, loss);
        printf("\n");
        printf("이것이 실제 돈이었다면:\n");
        printf("   %d원의 실제 손실 (1코인 = 1원 가정)\n", loss);
        printf("   이는 많은 사람들의 한 달 용돈에 해당합니다\n");
        printf("   생활비, 학비 등 필수 지출에 영향을 줄 수 있습니다\n");
        printf("\n");
        printf("도박 중독자의 심리:\n");
        printf("   \"다음에는 반드시 따겠다\" ← 이런 생각이 위험합니다!\n");
        printf("   \"잃은 돈을 되찾아야 한다\" ← 더 큰 손실로 이어집니다!\n");
        printf("\n");
        printf("현명한 선택:\n");
        printf("   지금 멈추고 손실을 인정하는 것이 최선입니다.\n");
        printf("   감정적으로 더 베팅하지 마세요!\n");
        printf("\n");
        printf("═══════════════════════════════════════════════════════\n");
        
        if (!askContinueAfterWarning()) {
            printf("\n현명한 선택입니다! 게임을 종료합니다.\n");
            exit(0);
        }
    }
}

/*
 * ============================================================================
 * 파산 상태 체크 및 교육 메시지
 * ============================================================================
 */
void checkBankruptcy(int coins, const char* nickname) {
    if (coins < BANKRUPTCY_THRESHOLD) {
        printf("\n");
        printf("═══════════════ 파산 경고! ═══════════════\n");
        printf("\n");
        printf("%s님, 코인이 %d개 밖에 남지 않았습니다!\n", nickname, coins);
        printf("\n");
        printf("실제 상황이라면:\n");
        printf("   신용카드 한도 초과\n");
        printf("   대출 불가능한 상태\n");
        printf("   가족들에게 손 벌리는 상황\n");
        printf("   극심한 스트레스와 우울감\n");
        printf("\n");
        printf("도박 중독의 진행 단계:\n");
        printf("   1. 승리 단계: 처음 몇 번 이기면서 자신감 과잉\n");
        printf("   2. 손실 단계: 잃기 시작하지만 '곧 회복될 것'이라 믿음\n");
        printf("   3. 절망 단계: 돈을 모두 잃고 빚까지 지게 됨 ← 현재 상태!\n");
        printf("\n");
        printf("도움을 요청하세요:\n");
        printf("   도박 중독 상담전화: 1336\n");
        printf("   한국도박문제관리센터: www.kcgp.or.kr\n");
        printf("   가까운 정신건강의학과 상담\n");
        printf("\n");
        showProjectPurpose();
        printf("\n게임을 종료하고 현실로 돌아가세요.\n");
        exit(0);
    }
}

/*
 * ============================================================================
 * 도박의 위험성 상세 설명
 * ============================================================================
 */
void showGamblingRisks(void) {
    printf("\n");
    printf("═══════════ 도박의 실제 위험성 ═══════════\n");
    printf("\n");
    printf("뇌과학적 관점:\n");
    printf("   • 도파민 분비로 인한 쾌감 중독\n");
    printf("   • 전두엽 기능 저하로 판단력 상실\n");
    printf("   • 내성 생성으로 더 큰 자극 추구\n");
    printf("\n");
    printf("경제적 피해:\n");
    printf("   • 평균 도박 중독자 부채: 수천만원\n");
    printf("   • 가정 경제 파탄률: 80%% 이상\n");
    printf("   • 신용불량자 전락 위험\n");
    printf("\n");
    printf("사회적 피해:\n");
    printf("   • 가족 관계 파괴\n");
    printf("   • 직장 생활 불가능\n");
    printf("   • 사회적 고립과 범죄 연루\n");
    printf("\n");
    printf("건강상 피해:\n");
    printf("   • 우울증, 불안장애\n");
    printf("   • 수면장애, 식욕부진\n");
    printf("   • 극단적 선택 위험 증가\n");
    printf("\n");
    printf("═══════════════════════════════════════════════════════\n");
}

/*
 * ============================================================================
 * 건전한 게임 이용 가이드
 * ============================================================================
 */
void showHealthyGamingTips(void) {
    printf("\n");
    printf("═══════════ 건전한 여가 생활 가이드 ═══════════\n");
    printf("\n");
    printf("대안 활동 추천:\n");
    printf("   운동: 조깅, 수영, 헬스 등\n");
    printf("   독서: 자기계발서, 소설 등\n");
    printf("   취미: 그림, 음악, 요리 등\n");
    printf("   사교: 친구들과의 건전한 만남\n");
    printf("   목표: 자격증 취득, 기술 습득\n");
    printf("\n");
    printf("도박 예방 수칙:\n");
    printf("   1. 절대 빌린 돈으로 도박하지 않기\n");
    printf("   2. 잃어도 괜찮은 돈으로만 하기\n");
    printf("   3. 시간 제한 설정하기\n");
    printf("   4. 감정적일 때는 피하기\n");
    printf("   5. 주변에 도움 요청하기\n");
    printf("\n");
    printf("기억하세요:\n");
    printf("   진정한 승자는 적당히 즐기고 멈출 줄 아는 사람입니다!\n");
    printf("\n");
    printf("═══════════════════════════════════════════════════════\n");
}

/*
 * ============================================================================
 * 경고 후 계속 여부 확인
 * ============================================================================
 */
bool askContinueAfterWarning(void) {
    char choice;
    printf("\n정말로 계속 하시겠습니까? (y/N): ");
    scanf(" %c", &choice);
    
    if (choice == 'y' || choice == 'Y') {
        printf("\n계속하시겠다면 다음을 명심하세요:\n");
        printf("   • 이것은 교육 목적의 시뮬레이션입니다\n");
        printf("   • 실제 도박은 절대 하지 마세요\n");
        printf("   • 손실에 대한 감정을 잘 관찰해보세요\n\n");
        return true;
    } else {
        return false;
    }
}
